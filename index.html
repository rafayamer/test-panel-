<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Casa Bistro ‚Äì Welcome</title>
<style>
  :root { --bg:#0f172a; --card:#111827; --text:#f8fafc; --muted:#94a3b8; --accent:#22c55e; --btn:#1f2937; --btn2:#0ea5e9; --warn:#f59e0b; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(160deg,#0b1224,#0f172a);}
  /* Safari fallback for svh */
  .wrap{min-height:100vh;min-height:100svh;display:flex;align-items:center;justify-content:center;padding:24px}
  .card{width:100%;max-width:520px;background:var(--card);border-radius:20px;padding:24px;box-shadow:0 10px 35px rgba(0,0,0,.45)}
  h1{color:var(--text);font-size:22px;margin:0 0 6px}
  .sub{color:var(--muted);font-size:14px;margin:0 0 18px}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  .btn{display:flex;align-items:center;gap:12px;width:100%;padding:16px 18px;border:0;border-radius:14px;background:var(--btn);color:var(--text);font-size:18px;font-weight:600;text-decoration:none;justify-content:center}
  .btn.menu{background:var(--btn2)} .btn.feedback{background:#10b981} .btn.wifi{background:#6366f1}
  .small{font-size:12px;color:var(--muted);margin-top:10px;text-align:center}
  .wifiBox{background:#0b1220;border:1px dashed #334155;border-radius:14px;padding:14px;margin-top:14px}
  .row{display:flex;gap:10px;align-items:center;justify-content:space-between}
  .pill{background:#111827;border:1px solid #334155;border-radius:10px;padding:10px 12px;color:var(--text);font-size:14px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .cp{padding:10px 12px;border-radius:10px;background:#0ea5e9;color:white;border:0;font-weight:700}
  .open{margin-top:10px;background:#22c55e}
  .hint{color:#cbd5e1;font-size:13px;margin-top:8px}
  .icons{font-size:22px}
  .banner{margin-top:10px;background:#1f2937;color:#e5e7eb;border-radius:10px;padding:10px 12px;font-size:13px;display:none}
  .banner.show{display:block}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Welcome to Casa Bistro üëã</h1>
    <p class="sub">Choose an option below</p>

    <div class="grid">
      <a id="menuBtn" class="btn menu" href="#" target="_blank" rel="noopener">
        <span class="icons">üìú</span> Menu
      </a>

      <a id="fbBtn" class="btn feedback" href="#" target="_blank" rel="noopener">
        <span class="icons">üìù</span> Feedback
      </a>

      <button id="wifiBtn" class="btn wifi" type="button">
        <span class="icons">üì∂</span> Join Wi-Fi
      </button>
    </div>

    <div id="wifiPanel" class="wifiBox" hidden>
      <div class="row" aria-label="Wi-Fi SSID">
        <div class="pill" id="ssidText">SSID</div>
        <button class="cp" id="copySsidBtn" type="button">Copy Name</button>
      </div>
      <div class="row" style="margin-top:8px" aria-label="Wi-Fi Password">
        <div class="pill" id="passText">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
        <button class="cp" id="copyPassBtn" type="button">Copy Password</button>
      </div>
      <button id="openWifi" class="cp open" type="button">Open Wi-Fi Settings</button>
      <div id="iosBanner" class="banner">iPhone/iPad: Open <b>Settings ‚Üí Wi-Fi</b>, tap ‚Äú<span id="ssidInline"></span>‚Äù, then <b>Paste</b> the password you copied.</div>
      <div class="hint">Tip: If your phone already knows this network, it should reconnect automatically when Wi-Fi is on.</div>
    </div>

    <p class="small">Trouble? Ask staff for help.</p>
  </div>
</div>

<script>
/* ====== CONFIG ‚Äì set your values here ====== */
const WIFI_SSID    = "Casa_Guest";             // Your Wi-Fi name
const WIFI_PASS    = "Pakistan@786";             // Your Wi-Fi password
const MENU_URL     = "https://cdn.qr-code-generator.com/account45775687/55317574_1.pdf?Expires=1760655864&Signature=amWAzs7T-~YYXvxOuuA1oQMGzDMnJ-AzopzrtDjzOutEHQ0COI5R6nSjqvRwEnRbOUjXHc7fwocKSX3hhlsZHfF44qmVdClCoOoFCUer-jFD5zx-sdzX8-TZ-4pzq-s8fVUBaukwSXofmCjnJvUuozdVE6seqjzd7zZirnHhNj-qGwSCLb7gIr9t79k2KJQ1DxK4gxKWjHgDHIq-1Azix6bcoHy6JXQ5h3Oo6CW~xyafCWklmVGjIxUqVEoDASv9hfPe9AWyZ1uBGiEHNfHbVRZ13ZoKk3rL3TnZZLTm120t35Zid8wS5noUi6rJmJ4-B-TNjTa9dAeQBFFRDp1cAg__&Key-Pair-Id=KKMPOJU8AYATR";
const FEEDBACK_URL = "https://forms.gle/your-google-form-id";
/* ========================================== */

const $ = (id)=>document.getElementById(id);
$("menuBtn").href = MENU_URL;
$("fbBtn").href   = FEEDBACK_URL;
$("ssidText").textContent = WIFI_SSID;
$("ssidInline").textContent = WIFI_SSID;

// Mask password visually but allow reveal on press (works on Safari & Chrome)
const passEl = $("passText");
const mask = s => s.replace(/./g, "‚Ä¢");
passEl.textContent = mask(WIFI_PASS);

// Long-press reveal (pointer/touch/mouse)
let pressTimer;
function reveal(){ passEl.textContent = WIFI_PASS; }
function hide(){ passEl.textContent = mask(WIFI_PASS); }
["pointerdown","touchstart","mousedown"].forEach(evt => passEl.addEventListener(evt, ()=>{ clearTimeout(pressTimer); pressTimer=setTimeout(reveal,120); }));
["pointerup","pointerleave","touchend","touchcancel","mouseup","mouseleave"].forEach(evt => passEl.addEventListener(evt, ()=>{ clearTimeout(pressTimer); hide(); }));

// Clipboard helpers with Safari fallback
async function copyText(text){
  try {
    if (navigator.clipboard && window.isSecureContext) {
      await navigator.clipboard.writeText(text);
    } else {
      // Fallback (older Safari/iOS): temporary input + execCommand
      const i = document.createElement("input");
      i.value = text;
      document.body.appendChild(i);
      i.select(); i.setSelectionRange(0, 99999);
      document.execCommand("copy");
      document.body.removeChild(i);
    }
    alert("Copied!");
  } catch (e) {
    alert("Copy failed. Please long-press and copy.");
  }
}
$("copySsidBtn").onclick = ()=>copyText(WIFI_SSID);
$("copyPassBtn").onclick = ()=>copyText(WIFI_PASS);

// Simple UA detection to tailor behavior
const ua = navigator.userAgent || "";
const isAndroid = /Android/i.test(ua);
const isChrome  = /Chrome|Chromium|CriOS/i.test(ua) && !/Edg/i.test(ua);
const isIOS     = /iPhone|iPad|iPod/i.test(ua);
const isSafari  = /^((?!chrome|android).)*safari/i.test(ua);

// Join Wi-Fi flow
$("wifiBtn").onclick = ()=>{
  $("wifiPanel").hidden = false;

  // Show iOS tip banner explicitly
  if (isIOS || isSafari) {
    $("iosBanner").classList.add("show");
  }

  // On Android + Chrome/Samsung Internet, try to open Wi-Fi settings via intent
  if (isAndroid) {
    const intents = [
      "intent:#Intent;action=android.settings.WIFI_SETTINGS;end",
      "intent://#Intent;action=android.settings.WIFI_SETTINGS;end"
    ];
    const a = document.createElement("a");
    a.style.display="none";
    a.rel="noopener";
    a.target="_self";
    a.href=intents[0];
    document.body.appendChild(a);
    a.click();
    setTimeout(()=>{ a.href=intents[1]; a.click(); setTimeout(()=>document.body.removeChild(a), 800); }, 600);
  }
};

// Dedicated button in case auto intent was blocked by the browser
$("openWifi").onclick = ()=>{
  if (isAndroid) {
    window.location.href = "intent:#Intent;action=android.settings.WIFI_SETTINGS;end";
  } else {
    // iOS cannot deep link to Wi-Fi settings; keep the banner visible
    $("iosBanner").classList.add("show");
  }
};
</script>
</body>
</html>
